import{d as q,r as o,u as I,o as O,a as b,w as C,b as u,c as R,e as s,f as x,g as e,t as n,h as E}from"./index-71915a35.js";const K={class:"h-full w-full flex flex-column align-items-center py-8"},z={class:"card flex flex-column justify-content-center align-items-center align-content-center text-center gap-3"},A={class:"p-inputgroup flex-1"},G=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-user"})],-1),H={class:"p-inputgroup flex-1"},J=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-shopping-bag"})],-1),Q={class:"p-inputgroup flex-1"},W=e("span",{class:"p-inputgroup-addon"},"@",-1),X={class:"pb-5"},Y={class:"text-5xl"},Z={class:"card col-8"},F={class:"flex justify-content-between align-items-center"},P={class:"flex gap-3 justify-content-around"},ee={class:"card flex flex-column justify-content-center align-items-center gap-3 align-content-start"},ae={class:"flex justify-content-center align-items-start gap-3"},te={class:"flex flex-auto justify-content-center, align-items-center w-full"},le={class:"p-input-icon-left w-full"},se=e("i",{class:"pi pi-search"},null,-1),oe={class:"col-12"},ne={class:"flex flex-column xl:flex-row xl:align-items-start p-4 gap-4"},ie=["src","alt"],ce={class:"flex flex-column sm:flex-row justify-content-between align-items-center xl:align-items-start flex-1 gap-4 w-8"},de={class:"flex flex-column align-items-center sm:align-items-start flex-grow-0 gap-3 w-8"},ue={class:"text-2xl font-bold overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},re={class:"text-xl font-light overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},pe={class:"flex align-items-center gap-3"},me={class:"flex align-items-center gap-2"},ve=e("i",{class:"pi pi-tag"},null,-1),fe={class:"font-semibold"},ge={class:"flex sm:flex-column align-items-center sm:align-items-end gap-3 sm:gap-2"},_e={class:"text-2xl font-semibold"},xe={class:"col-12 sm:col-6 lg:col-12 xl:col-4 p-2"},he={class:"p-4 border-1 surface-border surface-card border-round"},we={class:"flex flex-wrap align-items-center justify-content-between gap-2"},ye={class:"flex align-items-center gap-2"},Ve=e("i",{class:"pi pi-tag"},null,-1),be={class:"font-semibold"},Ce={class:"flex flex-column align-items-center gap-3 py-5"},Me=["src","alt"],Ue={class:"text-2xl font-bold overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},Le={class:"text-xl font-light overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},je={class:"flex align-items-center justify-content-between"},De={class:"text-2xl font-semibold"},Se=q({__name:"CatalogView",props:{category:{type:String,required:!0},searchName:{type:String,required:!1}},setup(D){const _=D,c=o([]),h=o([]),r=o({}),p=o([]),v=o(0),f=o(0),w=o(""),i=o(!1),d=o({}),k=I(),M=o({}),U=o({});O(async()=>{r.value.category=_.category,c.value=await b.getCatalogByFilter(r.value),v.value=Math.min(...c.value.map(l=>l.price)),f.value=Math.max(...c.value.map(l=>l.price)),p.value=[v.value,f.value],_.searchName&&(c.value=c.value.filter(l=>l.name.toLocaleLowerCase().includes(_.searchName.toLocaleLowerCase()))),h.value=c.value,M.value=await b.getCategories(),U.value=b.findCategory(M.value,_.category)}),C(p,l=>{r.value.priceMin=l[0],r.value.priceMax=l[1]}),C(w,l=>{r.value.name=l}),C(r,l=>{h.value=c.value.filter(t=>l.priceMax&&l.priceMin?t.price>=l.priceMin&&t.price<=l.priceMax:l.priceMin?t.price>=l.priceMin:l.priceMax?t.price<=l.priceMax:!0).filter(t=>l.name?t.name.toLocaleLowerCase().includes(l.name.toLocaleLowerCase()):!0)},{deep:!0});const S=()=>{k.add({severity:"success",summary:`Дорогой ${d.value.name}, заявка успешно оформлена!`,detail:"Мы получили ваше обращение, дождитесь обратной связи",life:1e4}),i.value=!i.value},y=o("grid");return(l,t)=>{var j;const m=u("InputText"),V=u("Button"),B=u("Dialog"),$=u("Slider"),N=u("DataViewLayoutOptions"),L=u("Rating"),T=u("DataView");return E(),R("div",K,[s(B,{visible:i.value,"onUpdate:visible":t[4]||(t[4]=a=>i.value=a),modal:"",header:"Оставьте заявку",style:{width:"50vw"}},{default:x(()=>[e("div",z,[e("div",A,[G,s(m,{placeholder:"Имя",modelValue:d.value.name,"onUpdate:modelValue":t[0]||(t[0]=a=>d.value.name=a)},null,8,["modelValue"])]),e("div",H,[J,s(m,{placeholder:"Товары, интересущие вас",modelValue:d.value.products,"onUpdate:modelValue":t[1]||(t[1]=a=>d.value.products=a)},null,8,["modelValue"])]),e("div",Q,[W,s(m,{placeholder:"Ваша почта",modelValue:d.value.email,"onUpdate:modelValue":t[2]||(t[2]=a=>d.value.email=a)},null,8,["modelValue"])]),s(V,{label:"Отправить",onClick:t[3]||(t[3]=a=>S())})])]),_:1},8,["visible"]),e("div",X,[e("span",Y,"Товары категории: "+n((j=U.value)==null?void 0:j.label),1)]),e("div",Z,[s(T,{value:h.value,layout:y.value,paginator:"",rows:6,dataKey:"name"},{header:x(()=>[e("div",F,[e("div",P,[e("div",ee,[e("div",ae,[s(m,{value:p.value[0],class:"w-4",max:f.value,min:v.value},null,8,["value","max","min"]),s(m,{value:p.value[1],class:"w-4",max:f.value,min:v.value},null,8,["value","max","min"])]),s($,{modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=a=>p.value=a),range:"",class:"w-14rem",min:v.value,max:f.value},null,8,["modelValue","min","max"])]),e("div",te,[e("span",le,[se,s(m,{modelValue:w.value,"onUpdate:modelValue":t[6]||(t[6]=a=>w.value=a),placeholder:"Search",class:"w-full"},null,8,["modelValue"])])])]),s(N,{modelValue:y.value,"onUpdate:modelValue":t[7]||(t[7]=a=>y.value=a)},null,8,["modelValue"])])]),list:x(a=>[e("div",oe,[e("div",ne,[e("img",{class:"w-9 sm:w-16rem xl:w-10rem shadow-2 block xl:block mx-auto border-round",src:`../src/assets/images/${a.data.img}`,alt:a.data.name},null,8,ie),e("div",ce,[e("div",de,[e("div",ue,n(a.data.name),1),e("div",re,n(a.data.description),1),s(L,{modelValue:a.data.rating,"onUpdate:modelValue":g=>a.data.rating=g,cancel:!1,readonly:""},null,8,["modelValue","onUpdate:modelValue"]),e("div",pe,[e("span",me,[ve,e("span",fe,n(a.data.category),1)])])]),e("div",ge,[e("span",_e,"₽"+n(a.data.price),1),s(V,{icon:"pi pi-shopping-cart",rounded:"",onClick:t[8]||(t[8]=g=>i.value=!i.value)})])])])])]),grid:x(a=>[e("div",xe,[e("div",he,[e("div",we,[e("div",ye,[Ve,e("span",be,n(a.data.category),1)])]),e("div",Ce,[e("img",{class:"w-9 shadow-2 border-round",src:`../src/assets/images/${a.data.img}`,alt:a.data.name},null,8,Me),e("div",Ue,n(a.data.name),1),e("div",Le,n(a.data.description),1),s(L,{modelValue:a.data.rating,"onUpdate:modelValue":g=>a.data.rating=g,cancel:!1,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),e("div",je,[e("span",De,"₽"+n(a.data.price),1),s(V,{icon:"pi pi-shopping-cart",rounded:"",onClick:t[9]||(t[9]=g=>i.value=!i.value)})])])])]),_:1},8,["value","layout"])])])}}});export{Se as default};
