import{d as I,r as o,u as O,o as R,a as b,w as C,b as u,c as E,e as s,f as x,g as e,t as n,h as K}from"./index-26acf455.js";const z={class:"h-full w-full flex flex-column align-items-center py-8"},A={class:"card flex flex-column justify-content-center align-items-center align-content-center text-center gap-3"},G={class:"p-inputgroup flex-1"},H=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-user"})],-1),J={class:"p-inputgroup flex-1"},Q=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-shopping-bag"})],-1),W={class:"p-inputgroup flex-1"},X=e("span",{class:"p-inputgroup-addon"},"@",-1),Y={class:"pb-5"},Z={class:"text-5xl"},F={class:"card col-8"},P={class:"flex justify-content-between align-items-center"},ee={class:"flex gap-3 justify-content-around"},ae={class:"card flex flex-column justify-content-center align-items-center gap-3 align-content-start"},te={class:"flex justify-content-center align-items-start gap-3"},le={class:"flex flex-auto justify-content-center, align-items-center w-full"},se={class:"p-input-icon-left w-full"},oe=e("i",{class:"pi pi-search"},null,-1),ne={class:"col-12"},ie={class:"flex flex-column xl:flex-row xl:align-items-start p-4 gap-4"},ce=["src","alt"],de={class:"flex flex-column sm:flex-row justify-content-between align-items-center xl:align-items-start flex-1 gap-4 w-8"},ue={class:"flex flex-column align-items-center sm:align-items-start flex-grow-0 gap-3 w-8"},re={class:"text-2xl font-bold overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},pe={class:"text-xl font-light overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},me={class:"flex align-items-center gap-3"},ve={class:"flex align-items-center gap-2"},fe=e("i",{class:"pi pi-tag"},null,-1),ge={class:"font-semibold"},_e={class:"flex sm:flex-column align-items-center sm:align-items-end gap-3 sm:gap-2"},xe={class:"text-2xl font-semibold"},he={class:"col-12 sm:col-6 lg:col-12 xl:col-4 p-2"},we={class:"p-4 border-1 surface-border surface-card border-round"},ye={class:"flex flex-wrap align-items-center justify-content-between gap-2"},Ve={class:"flex align-items-center gap-2"},be=e("i",{class:"pi pi-tag"},null,-1),Ce={class:"font-semibold"},Me={class:"flex flex-column align-items-center gap-3 py-5"},Ue=["src","alt"],Le={class:"text-2xl font-bold overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},je={class:"text-xl font-light overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},De={class:"flex align-items-center justify-content-between"},$e={class:"text-2xl font-semibold"},Se=I({__name:"CatalogView",props:{category:{type:String,required:!0},searchName:{type:String,required:!1}},setup($){const _=$,c=o([]),h=o([]),r=o({}),p=o([]),v=o(0),f=o(0),w=o(""),i=o(!1),d=o({}),k=O(),M=o({}),U=o({}),L=o("/eshop/images");R(async()=>{r.value.category=_.category,c.value=await b.getCatalogByFilter(r.value),v.value=Math.min(...c.value.map(l=>l.price)),f.value=Math.max(...c.value.map(l=>l.price)),p.value=[v.value,f.value],_.searchName&&(c.value=c.value.filter(l=>l.name.toLocaleLowerCase().includes(_.searchName.toLocaleLowerCase()))),h.value=c.value,M.value=await b.getCategories(),U.value=b.findCategory(M.value,_.category)}),C(p,l=>{r.value.priceMin=l[0],r.value.priceMax=l[1]}),C(w,l=>{r.value.name=l}),C(r,l=>{h.value=c.value.filter(t=>l.priceMax&&l.priceMin?t.price>=l.priceMin&&t.price<=l.priceMax:l.priceMin?t.price>=l.priceMin:l.priceMax?t.price<=l.priceMax:!0).filter(t=>l.name?t.name.toLocaleLowerCase().includes(l.name.toLocaleLowerCase()):!0)},{deep:!0});const S=()=>{k.add({severity:"success",summary:`Дорогой ${d.value.name}, заявка успешно оформлена!`,detail:"Мы получили ваше обращение, дождитесь обратной связи",life:1e4}),i.value=!i.value},y=o("grid");return(l,t)=>{var D;const m=u("InputText"),V=u("Button"),B=u("Dialog"),N=u("Slider"),T=u("DataViewLayoutOptions"),j=u("Rating"),q=u("DataView");return K(),E("div",z,[s(B,{visible:i.value,"onUpdate:visible":t[4]||(t[4]=a=>i.value=a),modal:"",header:"Оставьте заявку",style:{width:"50vw"}},{default:x(()=>[e("div",A,[e("div",G,[H,s(m,{placeholder:"Имя",modelValue:d.value.name,"onUpdate:modelValue":t[0]||(t[0]=a=>d.value.name=a)},null,8,["modelValue"])]),e("div",J,[Q,s(m,{placeholder:"Товары, интересущие вас",modelValue:d.value.products,"onUpdate:modelValue":t[1]||(t[1]=a=>d.value.products=a)},null,8,["modelValue"])]),e("div",W,[X,s(m,{placeholder:"Ваша почта",modelValue:d.value.email,"onUpdate:modelValue":t[2]||(t[2]=a=>d.value.email=a)},null,8,["modelValue"])]),s(V,{label:"Отправить",onClick:t[3]||(t[3]=a=>S())})])]),_:1},8,["visible"]),e("div",Y,[e("span",Z,"Товары категории: "+n((D=U.value)==null?void 0:D.label),1)]),e("div",F,[s(q,{value:h.value,layout:y.value,paginator:"",rows:6,dataKey:"name"},{header:x(()=>[e("div",P,[e("div",ee,[e("div",ae,[e("div",te,[s(m,{value:p.value[0],class:"w-4",max:f.value,min:v.value},null,8,["value","max","min"]),s(m,{value:p.value[1],class:"w-4",max:f.value,min:v.value},null,8,["value","max","min"])]),s(N,{modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=a=>p.value=a),range:"",class:"w-14rem",min:v.value,max:f.value},null,8,["modelValue","min","max"])]),e("div",le,[e("span",se,[oe,s(m,{modelValue:w.value,"onUpdate:modelValue":t[6]||(t[6]=a=>w.value=a),placeholder:"Search",class:"w-full"},null,8,["modelValue"])])])]),s(T,{modelValue:y.value,"onUpdate:modelValue":t[7]||(t[7]=a=>y.value=a)},null,8,["modelValue"])])]),list:x(a=>[e("div",ne,[e("div",ie,[e("img",{class:"w-9 sm:w-16rem xl:w-10rem shadow-2 block xl:block mx-auto border-round",src:`${L.value}/${a.data.img}`,alt:a.data.name},null,8,ce),e("div",de,[e("div",ue,[e("div",re,n(a.data.name),1),e("div",pe,n(a.data.description),1),s(j,{modelValue:a.data.rating,"onUpdate:modelValue":g=>a.data.rating=g,cancel:!1,readonly:""},null,8,["modelValue","onUpdate:modelValue"]),e("div",me,[e("span",ve,[fe,e("span",ge,n(a.data.category),1)])])]),e("div",_e,[e("span",xe,"₽"+n(a.data.price),1),s(V,{icon:"pi pi-shopping-cart",rounded:"",onClick:t[8]||(t[8]=g=>i.value=!i.value)})])])])])]),grid:x(a=>[e("div",he,[e("div",we,[e("div",ye,[e("div",Ve,[be,e("span",Ce,n(a.data.category),1)])]),e("div",Me,[e("img",{class:"w-9 shadow-2 border-round",src:`${L.value}/${a.data.img}`,alt:a.data.name},null,8,Ue),e("div",Le,n(a.data.name),1),e("div",je,n(a.data.description),1),s(j,{modelValue:a.data.rating,"onUpdate:modelValue":g=>a.data.rating=g,cancel:!1,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),e("div",De,[e("span",$e,"₽"+n(a.data.price),1),s(V,{icon:"pi pi-shopping-cart",rounded:"",onClick:t[9]||(t[9]=g=>i.value=!i.value)})])])])]),_:1},8,["value","layout"])])])}}});export{Se as default};
