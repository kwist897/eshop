import{d as O,r as o,u as R,o as E,a as b,w as C,b as c,c as K,e as s,f as x,g as e,t as n,h as z}from"./index-b3e7b026.js";const A={class:"h-full w-full flex flex-column align-items-center py-8"},G={class:"card flex flex-column justify-content-center align-items-center align-content-center text-center gap-3"},H={class:"p-inputgroup flex-1"},J=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-user"})],-1),Q={class:"p-inputgroup flex-1"},W=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-shopping-bag"})],-1),X={class:"p-inputgroup flex-1"},Y=e("span",{class:"p-inputgroup-addon"},"@",-1),Z={class:"pb-5"},F={class:"text-5xl"},P={class:"card col-8"},ee={class:"flex justify-content-between align-items-center"},ae={class:"flex gap-3 justify-content-around"},le={class:"card flex flex-column justify-content-center align-items-center gap-3 align-content-start"},te={class:"flex justify-content-center align-items-start gap-3"},se={class:"flex flex-auto justify-content-center, align-items-center w-full"},oe={class:"p-input-icon-left w-full"},ne=e("i",{class:"pi pi-search"},null,-1),ie={class:"col-12"},de={class:"flex flex-column xl:flex-row xl:align-items-start p-4 gap-4"},ce=["src","alt"],ue={class:"flex flex-column sm:flex-row justify-content-between align-items-center xl:align-items-start flex-1 gap-4 w-8"},re={class:"flex flex-column align-items-center sm:align-items-start flex-grow-0 gap-3 w-8"},me={class:"text-2xl font-bold overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},pe={class:"text-xl font-light overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},ve={class:"flex align-items-center gap-3"},fe={class:"flex align-items-center gap-2"},ge=e("i",{class:"pi pi-tag"},null,-1),_e={class:"font-semibold"},xe={class:"flex sm:flex-column align-items-center sm:align-items-end gap-3 sm:gap-2"},he={class:"text-2xl font-semibold"},we={class:"col-12 sm:col-6 lg:col-12 xl:col-4 p-2"},Ve={class:"p-4 border-1 surface-border surface-card border-round"},ye={class:"flex flex-wrap align-items-center justify-content-between gap-2"},be={class:"flex align-items-center gap-2"},Ce=e("i",{class:"pi pi-tag"},null,-1),Me={class:"font-semibold"},Ue={class:"flex flex-column align-items-center gap-3 py-5"},Le=["src","alt"],je={class:"text-2xl font-bold overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},De={class:"text-xl font-light overflow-hidden white-space-nowrap text-overflow-ellipsis w-full"},$e={class:"flex align-items-center justify-content-between"},ke={class:"text-2xl font-semibold"},Se=O({__name:"CatalogView",props:{category:{type:String,required:!0},searchName:{type:String,required:!1}},setup(k){const g=k,u=o([]),h=o([]),m=o({}),i=o([]),p=o(0),v=o(0),w=o(""),d=o(!1),r=o({}),N=R(),M=o({}),U=o({}),L=o("./images");E(async()=>{m.value.category=g.category,u.value=await b.getCatalogByFilter(m.value),p.value=Math.min(...u.value.map(t=>t.price)),v.value=Math.max(...u.value.map(t=>t.price)),i.value=[p.value,v.value],g.searchName&&(u.value=u.value.filter(t=>t.name.toLocaleLowerCase().includes(g.searchName.toLocaleLowerCase()))),h.value=u.value,M.value=await b.getCategories(),U.value=b.findCategory(M.value,g.category)}),C(i,t=>{m.value.priceMin=t[0],m.value.priceMax=t[1]}),C(w,t=>{m.value.name=t}),C(m,t=>{h.value=u.value.filter(l=>t.priceMax&&t.priceMin?l.price>=t.priceMin&&l.price<=t.priceMax:t.priceMin?l.price>=t.priceMin:t.priceMax?l.price<=t.priceMax:!0).filter(l=>t.name?l.name.toLocaleLowerCase().includes(t.name.toLocaleLowerCase()):!0)},{deep:!0});const S=()=>{N.add({severity:"success",summary:`Дорогой ${r.value.name}, заявка успешно оформлена!`,detail:"Мы получили ваше обращение, дождитесь обратной связи",life:1e4}),d.value=!d.value},V=o("grid");return(t,l)=>{var $;const _=c("InputText"),y=c("Button"),B=c("Dialog"),j=c("InputNumber"),I=c("Slider"),T=c("DataViewLayoutOptions"),D=c("Rating"),q=c("DataView");return z(),K("div",A,[s(B,{visible:d.value,"onUpdate:visible":l[4]||(l[4]=a=>d.value=a),modal:"",header:"Оставьте заявку",style:{width:"50vw"}},{default:x(()=>[e("div",G,[e("div",H,[J,s(_,{placeholder:"Имя",modelValue:r.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>r.value.name=a)},null,8,["modelValue"])]),e("div",Q,[W,s(_,{placeholder:"Товары, интересущие вас",modelValue:r.value.products,"onUpdate:modelValue":l[1]||(l[1]=a=>r.value.products=a)},null,8,["modelValue"])]),e("div",X,[Y,s(_,{placeholder:"Ваша почта",modelValue:r.value.email,"onUpdate:modelValue":l[2]||(l[2]=a=>r.value.email=a)},null,8,["modelValue"])]),s(y,{label:"Отправить",onClick:l[3]||(l[3]=a=>S())})])]),_:1},8,["visible"]),e("div",Z,[e("span",F,"Товары категории: "+n(($=U.value)==null?void 0:$.label),1)]),e("div",P,[s(q,{value:h.value,layout:V.value,paginator:"",rows:6,dataKey:"name"},{header:x(()=>[e("div",ee,[e("div",ae,[e("div",le,[e("div",te,[s(j,{modelValue:i.value[0],"onUpdate:modelValue":l[5]||(l[5]=a=>i.value[0]=a),modelModifiers:{number:!0},class:"w-2",max:v.value,min:p.value},null,8,["modelValue","max","min"]),s(j,{modelValue:i.value[1],"onUpdate:modelValue":l[6]||(l[6]=a=>i.value[1]=a),modelModifiers:{number:!0},class:"w-2",max:v.value,min:p.value},null,8,["modelValue","max","min"])]),s(I,{modelValue:i.value,"onUpdate:modelValue":l[7]||(l[7]=a=>i.value=a),range:"",class:"w-14rem",min:p.value,max:v.value},null,8,["modelValue","min","max"])]),e("div",se,[e("span",oe,[ne,s(_,{modelValue:w.value,"onUpdate:modelValue":l[8]||(l[8]=a=>w.value=a),placeholder:"Search",class:"w-full"},null,8,["modelValue"])])])]),s(T,{modelValue:V.value,"onUpdate:modelValue":l[9]||(l[9]=a=>V.value=a)},null,8,["modelValue"])])]),list:x(a=>[e("div",ie,[e("div",de,[e("img",{class:"w-9 sm:w-16rem xl:w-10rem shadow-2 block xl:block mx-auto border-round",src:`${L.value}/${a.data.img}`,alt:a.data.name},null,8,ce),e("div",ue,[e("div",re,[e("div",me,n(a.data.name),1),e("div",pe,n(a.data.description),1),s(D,{modelValue:a.data.rating,"onUpdate:modelValue":f=>a.data.rating=f,cancel:!1,readonly:""},null,8,["modelValue","onUpdate:modelValue"]),e("div",ve,[e("span",fe,[ge,e("span",_e,n(a.data.category),1)])])]),e("div",xe,[e("span",he,"₽"+n(a.data.price),1),s(y,{icon:"pi pi-shopping-cart",rounded:"",onClick:l[10]||(l[10]=f=>d.value=!d.value)})])])])])]),grid:x(a=>[e("div",we,[e("div",Ve,[e("div",ye,[e("div",be,[Ce,e("span",Me,n(a.data.category),1)])]),e("div",Ue,[e("img",{class:"w-9 shadow-2 border-round",src:`${L.value}/${a.data.img}`,alt:a.data.name},null,8,Le),e("div",je,n(a.data.name),1),e("div",De,n(a.data.description),1),s(D,{modelValue:a.data.rating,"onUpdate:modelValue":f=>a.data.rating=f,cancel:!1,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),e("div",$e,[e("span",ke,"₽"+n(a.data.price),1),s(y,{icon:"pi pi-shopping-cart",rounded:"",onClick:l[11]||(l[11]=f=>d.value=!d.value)})])])])]),_:1},8,["value","layout"])])])}}});export{Se as default};
